@using BiofuelSouth.Models
@model BiofuelSouth.Models.Input

@{
    ViewBag.Title = "title";
    if (Model.General.ProjectLife >= 10)
    {
        Model.General.ProjectLife = 10; 
    }

}

<div class="container">


    <div class="row" id="summaryHead">
        <div class="col-md-12 col-lg-12">
            <h2>Summary for @Model.General.Category in @(Constants.CountyName(Model.General.County)), @Model.General.State</h2>
        </div>

    </div>

    <div class="row">

        <div class="col-md-3 col-lg-4 bg-info">
            <p>
                @if (Model.General.ProjectLife > 0)
                {

                    <div>
                        Estimated Net Annual Production (tons): @Math.Round(Model.GetAnnualProductionList().Average(), 0)

                    </div>
                    <div>
                        Estimated Net Production (tons): @Math.Round(Model.GetAnnualProductionList().Sum(), 0)

                    </div>
                    <div>
                        Estimated Annual Cost: @Model.GetAnnualCost().ToString("C")
                    </div>
                    <div>
                        Estimated Annual Revennue: @Model.GetAnnualRevenue().ToString("C")
                    </div>
                }
            </p>
            <p>
                <h3>Assumptions and Parameters</h3>
                <div>
                    TBD: State all the defualt values used.
                </div>
                <div class="text-danger">
                    TBD: The current result does not include financials.
                </div>
            </p>
            <p>
                <h3>More Information</h3>
                <div>
                    TBD: Suggest further steps based on resutls. For example tranportation, near by facilities etc.
                </div>
                <div>
                    TBD: Show all the relevant contacts applicable for the results (e.g. FSA, etc)
                </div>
            </p>
        </div>

        <div class="col-md-9 col-lg-8">
            <strong>Productivity and Cost</strong>
            <table class="table table-responsive table-bordered table-striped">
                <thead>
                    <tr>
                        <th rowspan="2">Description</th>
                        <th colspan="10">Year</th>
                    </tr>
                    <tr>
                        @{
                            for (int i = 0; i < Model.General.ProjectLife; i++)
                            {
                                <th>@(i + 1)</th>
                            }
                        }
                    </tr>
                </thead>


                @if (Model.GetStorageLossFactor() > 0)
                {
                    <tr>
                        <td>
                            Estimated Gross Annual Production (tons/year)
                        </td>
                        @foreach (var a in Model.GetGrossProductionList())
                        {
                            <td>@Math.Round(a, 0)</td>
                        }
                    </tr>

                    <tr>
                        <td>
                            Estimated Annual Loss From Storage (tons/year)
                        </td>
                        @foreach (var a in Model.GetGrossProductionList())
                        {
                            <td>@Math.Round(a * Model.GetStorageLossFactor() * Model.Storage.StorageTime / 200 * Model.Storage.PercentStored / 100, 0)</td>
                        }
                    </tr>

                }

                <tr>
                    <td>
                        Estimated Net Annual Production (tons/year)
                    </td>
                    @foreach (var a in Model.GetAnnualProductionList())
                    {
                        <td>@Math.Round(a, 0)</td>
                    }
                </tr>

            </table>

            <div id="chart">
                @{

                    string url = Url.Action("ShowChart", "Chart", new { ViewBag.cacheKey });
                    <img src="@url" class="img-responsive" alt="Chart Summary" />
                }
            </div>

        </div>

    </div>

    @Html.Partial("_Disclaimer")
</div>



